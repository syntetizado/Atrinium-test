{% extends 'base.html.twig' %}

{% block title %} My profile {% endblock %}

{% block header %}
	{% include '_includes/header.html.twig' with {
		'levels': {
			1 : {
				'name' : 'My profile',
				'route' : 'profile',
				}
		}} %}
{% endblock %}

{% block body %}
<div class="container">
	<div class="main-body">
		<div class="row gutters-sm">


			<div class="col-md-4 mb-3">
				<div class="card">
					<div class="card-body">
						<div class="d-flex flex-column align-items-center text-center">
							<img src="https://bootdey.com/img/Content/avatar/avatar7.png" alt="Admin" class="rounded-circle" width="150">
							<div class="mt-3">
								<h4>{{app.user.username}}</h4>
								<p class="text-secondary mb-1">{{app.user.email}}</p>
								<hr>
								<p class="">Role: <b class="text-primary">{{app.user.idrole.name}}</b></p>
								<a class="text-white font-size-sm bg-primary rounded py-1 px-3" href="{{path('change-role')}}">
									<i class="fas fa-sync-alt" ></i>
									Change Role
								</a>
								<p class="pt-3 text-muted">(you will be redirected to login)</p>
								{% if is_granted('ROLE_ADMIN') %}
								<a href="{{path('admin-users')}}">
									<button type="button" class="btn btn-info">
										<i class="fas fa-users-cog fa-5x"></i>
										<p class="font-weight-bold">Administrate users</p>
									</button>
								</a>
								{% endif %}
							</div>
						</div>
					</div>
				</div>
			</div>


			<div class="col-md-8 mb-3 col-12">
				<div class="row gutters-sm ml-0">
					<div class="col-sm-6 mb-3">
						<div class="card h-100">
							<div class="card-body">
								<h6 class="d-flex align-items-center mb-3"><i class="material-icons text-info mr-2">Owned</i>Companies</h6>
								{% for company in companies %}
									<small>► {{company.name}}</small> <br>
								{% else %}
									<small>No companies owned</small>
								{% endfor %}
								{% if companyDots %}
									<small> · · · </small> <br>
								{% endif %}
							</div>
						</div>
					</div>

					<div class="col-sm-6 mb-3">
						<div class="card h-100">
							<div class="card-body">
								<h6 class="d-flex align-items-center mb-3"><i class="material-icons text-info mr-2">Assigned</i>Sectors</h6>
								{% for sector in sectors %}
									<small>► {{sector.idsector.name}}</small> <br>
								{% else %}
									<small>No sectors assigned</small>
								{% endfor %}
								{% if sectorDots %}
									<small> · · · </small> <br>
								{% endif %}
							</div>
						</div>
					</div>
				</div>
			</div>


		</div>
	</div>
</div>


{% endblock %}
